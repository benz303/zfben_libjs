#!/usr/bin/env ruby
require File.join(File.dirname(__FILE__), '..', 'lib', 'zfben_libjs.rb')

p args = ARGF.argv

if args.length == 0
  STDERR.print "Please use `libjs [config_filename]` or use `libjs new` to create new libjs project\n".color(:green)
else
  if args[0] == 'new'
    system('mkdir libjs')
    cmd = 'cp ' + File.join(File.dirname(__FILE__), '..', 'lib', 'zfben_libjs', 'example.yml') + ' ' + File.realpath('libjs')
    if system(cmd)
      STDOUT.print "Create libjs/example.yml\nYou change it then use `libjs example` to build it\n".color(:green)
    end
  else
    lib = Libjs.new(args[0])
    if args.length == 1
      lib.build!
    end
  end
end
